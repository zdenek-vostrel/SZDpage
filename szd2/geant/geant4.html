
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../szd1/DAlembert.html">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Geant4 - SZD</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#geant4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SZD" class="md-header__button md-logo" aria-label="SZD" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SZD
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Geant4
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.html" class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../szd1/doors.html" class="md-tabs__link">
          
  
    
  
  SZD1

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="geant4.html" class="md-tabs__link">
          
  
    
  
  SZD2

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SZD" class="md-nav__button md-logo" aria-label="SZD" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SZD
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tags.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SZD1
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            SZD1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SZD1 Codes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            SZD1 Codes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../szd1/doors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The three door problem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../szd1/DAlembert.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    D'Alembert Strategy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SZD2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            SZD2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SZD2 Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            SZD2 Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Geant4
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="geant4.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Geant4
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Installation &amp; setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simulation setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main-file" class="md-nav__link">
    <span class="md-ellipsis">
      Main file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Construction definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Construction definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition-of-custom-material" class="md-nav__link">
    <span class="md-ellipsis">
      Definition of custom material
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-list-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Physics list definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Physics list definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-predefined-physics-list" class="md-nav__link">
    <span class="md-ellipsis">
      Using predefined physics list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-own-physics-list" class="md-nav__link">
    <span class="md-ellipsis">
      Using own physics list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Action definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-primary-particle-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Define primary particle generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-particle-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Define particle detection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Running the simulation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Installation &amp; setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulation-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Simulation setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Simulation setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main-file" class="md-nav__link">
    <span class="md-ellipsis">
      Main file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#construction-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Construction definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Construction definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition-of-custom-material" class="md-nav__link">
    <span class="md-ellipsis">
      Definition of custom material
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physics-list-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Physics list definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Physics list definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-predefined-physics-list" class="md-nav__link">
    <span class="md-ellipsis">
      Using predefined physics list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-own-physics-list" class="md-nav__link">
    <span class="md-ellipsis">
      Using own physics list
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Action definition
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action definition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#define-primary-particle-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Define primary particle generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-particle-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Define particle detection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Running the simulation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="geant4">Geant4<a class="headerlink" href="#geant4" title="Permanent link">造</a></h1>
<p><a href="https://geant4.web.cern.ch/">Geant4</a> is a powerful, open-source simulation toolkit used to model the interaction of particles with matter. It's widely used in various fields, including:</p>
<div class="grid cards">
<ul>
<li><strong>High-Energy Physics</strong>: Simulating particle collisions, detector responses, and data analysis.</li>
<li><strong>Nuclear Physics</strong>: Studying nuclear reactions, radiation transport, and detector simulations.</li>
<li><strong>Medical Physics</strong>: Modeling radiation therapy, dosimetry, and medical imaging.</li>
<li><strong>Space Exploration</strong>: Simulating radiation effects on spacecraft, astronauts, and electronic components.</li>
<li><strong>Materials Science</strong>: Investigating radiation damage, radiation-induced effects, and materials properties.</li>
</ul>
</div>
<p><a href="https://geant4.web.cern.ch/">Geant4</a> provides a comprehensive framework for simulating the transport of particles, such as electrons, photons, neutrons, and ions, through various materials and detectors. It takes into account complex physical processes, including:</p>
<ul>
<li>Ionization and excitation</li>
<li>Bremsstrahlung and pair production</li>
<li>Compton scattering and photoelectric effects</li>
<li>Hadronic interactions and nuclear reactions</li>
</ul>
<p>The toolkit allows the user to define:</p>
<ul>
<li>Interaction physics</li>
<li>Geometry and composition of the matter (detector)</li>
<li>Particle generation</li>
<li>Data readout</li>
<li>Vizualisation</li>
</ul>
<p><a href="https://geant4.web.cern.ch/">Geant4</a> is written in C++ and provides a flexible, modular architecture, allowing users to customize and extend the toolkit to suit their specific needs. There is also a possibility to use <a href="https://geant4.web.cern.ch/">Geant4</a> with Python.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Basic understanding of the framework can be obtained by following this <a href="https://www.youtube.com/playlist?list=PLLybgCU6QCGWgzNYOV0SKen9vqg4KXeVL">youtube playlist</a>. </p>
</div>
<h2 id="installation-setup">Installation &amp; setup<a class="headerlink" href="#installation-setup" title="Permanent link">造</a></h2>
<p>The instruction for a local installation one needs to follow the <a href="https://geant4.web.cern.ch/docs/">dedicated official documentation</a>. </p>
<p>On sunrise machine, Geant4 can be set up by running the following command</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">C++</label><label for="__tabbed_1_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">source</span><span class="w"> </span>/data2/vyuka/szd/G4_setup.sh
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-shell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">source</span><span class="w"> </span>/data2/vyuka/szd/setup_Geant4.sh
</span></code></pre></div>
</div>
</div>
</div>
<h2 id="simulation-setup">Simulation setup<a class="headerlink" href="#simulation-setup" title="Permanent link">造</a></h2>
<p>There are three components that need to be prepared for each simulation:</p>
<div class="grid cards">
<ul>
<li>
<p><strong>Construction definition</strong></p>
<hr />
<p>Definition of the geometry and material of the detector or general volume, that we want to simulate. </p>
<p><a href="#construction-definition"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/></svg></span> More</a></p>
</li>
<li>
<p><strong>Physics list</strong></p>
<hr />
<p>Definition of the actual physics that will be active during the simulation. </p>
<p>This is mainly for speed purposes: for example during simulation of electrons in electromagnetic calorimeters, no hadronic processes are needed so we can turn them off and speed up the simulation.</p>
<p><a href="#physics-list-definition"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/></svg></span> More</a></p>
</li>
<li>
<p><strong>Action definition</strong></p>
<hr />
<p>Definition of various action performed during the simulations: generation of particles, detection of particles, tracking and stepping.</p>
<p><a href="#action-definition"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/></svg></span> More</a></p>
</li>
</ul>
</div>
<p><a href="generalLayout.png"><img alt="General Layout" src="generalLayout.png" /></a></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">C++</label><label for="__tabbed_2_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In <code>C++</code>, each part needs to be writted as a separate class, for clarity purposes with its own header and definition file. The typical file structure is therefore</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>mainFile.cc
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>CMakeLists.txt
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>include/
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    construction.hh
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    physicsList.hh
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    action.hh
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>src/
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    construction.cc
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    physicsList.cc
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    action.cc
</span></code></pre></div>
<p>The structure of the main file is explained <a href="#main-file">later</a>. </p>
<p>The <code>CMakeLists.txt</code> is required for proper compilation of the multiple files. For details, refer to <a href="#running-the-simulation">Running the simulation</a>.</p>
</div>
<div class="tabbed-block">
<p>In <code>Python</code>, each part needs to be writtes as a separate class. However, thanks to simplicity of <code>Python</code>, it is recommanded to keep everything in one file, unless the project is very complicated. </p>
</div>
</div>
</div>
<h3 id="main-file">Main file<a class="headerlink" href="#main-file" title="Permanent link">造</a></h3>
<p>In the main file, we tell Geant what files we want to use to define the individual parts of the simulation, start the GUI and apply basic commands. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">C++</label><label for="__tabbed_3_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">mainFile.cc</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;iostream&quot;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1">// We import the Geant stuff</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4RunManager.hh&quot;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4UIExecutive.hh&quot;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VisExecutive.hh&quot;</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VisManager.hh&quot;</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4UImanager.hh&quot;</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c1">// We import our header files for construction, physics list and action</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;include/construction.hh&quot;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;include/physicsList.hh&quot;</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;include/action.hh&quot;</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">){</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">    </span><span class="c1">// We initialise the Geant4 manager</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">runManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4RunManager</span><span class="p">();</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="c1">// We tell Geant what construction, physics list and action to use</span>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">    </span><span class="c1">// these classes are defined in the imported header files</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">    </span><span class="n">runManager</span><span class="o">-&gt;</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">ConstructionDefinition</span><span class="p">());</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">    </span><span class="n">runManager</span><span class="o">-&gt;</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">PhysicsListDefinition</span><span class="p">());</span>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="w">    </span><span class="n">runManager</span><span class="o">-&gt;</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">ActionDefinition</span><span class="p">());</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="w">    </span><span class="c1">// We initialise the Geant4 manager</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="w">    </span><span class="n">runManager</span><span class="o">-&gt;</span><span class="n">Initialize</span><span class="p">();</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="w">    </span><span class="c1">// We prepare and initialise the GUI</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">ui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4UIExecutive</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">visManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4VisExecutive</span><span class="p">();</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a><span class="w">    </span><span class="n">visManager</span><span class="o">-&gt;</span><span class="n">Initialize</span><span class="p">();</span>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="w">    </span><span class="c1">// We can send commands (e.g. create particles) from </span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="w">    </span><span class="c1">// the GUI or from here already using the UImanager</span>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a><span class="w">    </span><span class="n">G4UImanager</span><span class="w"> </span><span class="o">*</span><span class="n">UImanager</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">G4UImanager</span><span class="o">::</span><span class="n">GetUIpointer</span><span class="p">();</span>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="w">    </span><span class="c1">// Commands are applied like this: </span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="w">    </span><span class="c1">// this one tells the UI to run 10 particles</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="w">    </span><span class="n">UImanager</span><span class="o">-&gt;</span><span class="n">ApplyCommand</span><span class="p">(</span><span class="s">&quot;/run/beamOn 10&quot;</span><span class="p">);</span>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="w">    </span><span class="c1">// Finally we start the session</span>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">    </span><span class="n">ui</span><span class="o">-&gt;</span><span class="n">SessionStart</span><span class="p">();</span>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># We import Geant4</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># We either import the required classes (construction, physics list, action) </span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1"># from separate definition files or define them here above the main funciton</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">electronEnergy</span><span class="p">,</span> <span class="n">foilWidth</span><span class="p">,</span> <span class="n">fPath</span><span class="p">,</span> <span class="n">nParticles</span><span class="p">):</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    <span class="c1"># We initialise the Geant4 manager</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="n">runManager</span> <span class="o">=</span> <span class="n">G4RunManagerFactory</span><span class="o">.</span><span class="n">CreateRunManager</span><span class="p">(</span><span class="n">G4RunManagerType</span><span class="o">.</span><span class="n">Serial</span><span class="p">)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    <span class="c1"># We tell Geant what construction, physics list and action to use</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="c1"># These classes need to be defined by us</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>    <span class="n">runManager</span><span class="o">.</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">ConstructionDefinition</span><span class="p">())</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="n">runManager</span><span class="o">.</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">PhysicsListDefinition</span><span class="p">())</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    <span class="n">runManager</span><span class="o">.</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">ActionDefinition</span><span class="p">())</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>    <span class="c1"># We initialise the Geant4 manage</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>    <span class="n">runManager</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>    <span class="c1"># We prepare and initialise the GUI</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>    <span class="n">ui</span> <span class="o">=</span> <span class="n">G4UIExecutive</span><span class="p">()</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>    <span class="n">visManager</span> <span class="o">=</span> <span class="n">G4VisExecutive</span><span class="p">()</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>    <span class="n">visManager</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>    <span class="c1"># We can send commands (e.g. create particles) from </span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>    <span class="c1"># the GUI or from here already using the UImanager</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>    <span class="n">UImanager</span> <span class="o">=</span> <span class="n">G4UImanager</span><span class="o">.</span><span class="n">GetUIpointer</span><span class="p">()</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>    <span class="c1"># Commands are applied like this: </span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>    <span class="c1"># this one tells the UI to run 10 particles</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>    <span class="n">UImanager</span><span class="o">.</span><span class="n">ApplyCommand</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/run/beamOn </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">nParticles</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>    <span class="c1"># Finally we start the session</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>    <span class="n">ui</span><span class="o">.</span><span class="n">SessionStart</span><span class="p">()</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="c1"># This will automatically call the main function </span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="c1"># when we write `python mainFile.py` to the terminal</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>    <span class="n">main</span><span class="p">()</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="construction-definition">Construction definition<a class="headerlink" href="#construction-definition" title="Permanent link">造</a></h3>
<p>Detector / volume construction is performed in three steps:</p>
<ul>
<li><strong>Solid volume</strong> - definition of shape and proportions</li>
<li><strong>Logical volume</strong> - definition of the material</li>
<li><strong>Physical volume</strong> - setting the volume in space</li>
</ul>
<p>The implementation is performed via the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4VUserDetectorConstruction.html"><code>G4VUserDetectorConstruction</code> class</a>.</p>
<p>For demonstration, we create a golden plate in a vacuum. First we create the "vacuum box":</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In general, the top volume is called the the <em>world volume</em>. In this example, the <em>world volume</em> consists of vacuum, but this is arbitrary.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">C++</label><label for="__tabbed_4_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">include/construction.hh</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cp">#ifndef DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="cp">#define DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VUserDetectorConstruction.hh&quot;</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VPhysicalVolume.hh&quot;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">class</span><span class="w"> </span><span class="n">DetectorConstruction</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VUserDetectorConstruction</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (1)!</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="o">~</span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">Construct</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)!</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="p">};</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="cp">#endif </span><span class="c1">//DETECTORCONSTRUCTION_HH</span>
</span></code></pre></div>
<ol>
<li>We derive our class from the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4VUserDetectorConstruction.html"><code>G4VUserDetectorConstruction</code> class</a>.</li>
<li>This is the actual method that we will use in the <code>src/construction.cc</code> to construct the volume (see bellow).</li>
</ol>
<div class="language-c highlight"><span class="filename">src/construction.cc</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// Geant4 includes</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Box.hh&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4SystemOfUnits.hh&gt;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4NistManager.hh&gt;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4LogicalVolume.hh&gt;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4PVPlacement.hh&gt;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VPhysicalVolume.hh&gt;</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Material.hh&gt;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="c1">// We include the header file</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/construction.hh&quot;</span><span class="c1"> // (1)!</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1">// Simple constructor and destructor</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="n">DetectorConstruction</span><span class="o">::</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="n">DetectorConstruction</span><span class="o">::~</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="c1">// Construction method itself</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">DetectorConstruction::Construct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="c1">// We define the foil size and the world size</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cm</span><span class="p">;</span><span class="w"> </span><span class="c1">// (7)!</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">um</span><span class="p">;</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.2</span><span class="p">;</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">;</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="c1">// We create an instance of the material manager</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">    </span><span class="n">G4NistManager</span><span class="w"> </span><span class="o">*</span><span class="n">nist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)!</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">    </span><span class="c1">// VACUUM BOX CONSTRUCTION</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">worldMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nist</span><span class="o">-&gt;</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s">&quot;G4_Galactic&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (3)!</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">solidWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Box</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="n">world_sizeZ</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4)!</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">logicWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span><span class="w"> </span><span class="n">worldMaterial</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;World&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (5)!</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">physWorldVolume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4PVPlacement</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span><span class="w">  </span><span class="c1">// (6)!</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">                                                        </span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">),</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="w">                                                        </span><span class="n">logicWorld</span><span class="p">,</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">                                                        </span><span class="s">&quot;World&quot;</span><span class="p">,</span>
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a><span class="w">                                                        </span><span class="n">nullptr</span><span class="p">,</span>
</span><span id="__span-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="w">                                                        </span><span class="nb">false</span><span class="p">,</span>
</span><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="w">                                                        </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="w">                                                        </span><span class="nb">true</span>
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>This header file must include the definition of the classes that are implemented in this file.   </li>
<li>There is a <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">list of predefined materials</a> that we can use. Alternatively, we can <a href="#definition-of-custom-material">define the material ourselves</a>.</li>
<li>There is not exactly vacuum in Geant4, so we select the material with the lowest density instead. The list of possible materials is <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">here</a>.</li>
<li>This is the <em>solid volume</em> definition step: it defines the dimensions of the material. <strong>The parameters are: name, X length, Y length, Z length.</strong> <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4CSGSolid.html">List of other shapes</a>.</li>
<li>Here we take the <em>solid volume</em> defined on the previous line and assign the material to it. The last argument is the (arbitrary) name.</li>
<li>Finally, we place the volume as the <em>physical volume</em>. The arguments are following: <ol>
<li>rotation of the volume (we do not want to rotate that)</li>
<li>position in space (no need to overthink, we put it in the center),</li>
<li>the <em>logic volume</em> that we want to use (the one we defined on previous line),</li>
<li>the name of the volume,</li>
<li>parent volume (this is the top volume, so there is no parent volume),</li>
<li>bool options if we want to add multiple instances of this volume (we don't want that here),</li>
<li>number of copies (again, we do not want that here),</li>
<li>bool option for volume check: checks overlaps of volumes, which may cause problems in the simulations (<strong>we almost always want this on</strong>).</li>
</ol>
</li>
<li>Thanks to <code>#include &lt;G4SystemOfUnits.hh&gt;</code> we can use the standard units (it just effectively multiplies it by the appropriate factor to match the base units Geant4 works with).</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or construction.py</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">class</span> <span class="nc">Construction</span><span class="p">(</span><span class="n">G4VUserDetectorConstruction</span><span class="p">):</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="k">def</span> <span class="nf">Construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>        <span class="c1"># We define the foil size and the world size</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        <span class="n">foil_sizeXY</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span> <span class="c1"># (6)!</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>        <span class="n">foil_sizeZ</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">um</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>        <span class="n">world_sizeXY</span> <span class="o">=</span> <span class="n">foil_sizeXY</span> <span class="o">*</span> <span class="mf">1.2</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        <span class="n">world_sizeZ</span> <span class="o">=</span> <span class="n">foil_sizeZ</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>        <span class="c1"># We create an instance of the material manager</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>        <span class="n">nist</span> <span class="o">=</span> <span class="n">G4NistManager</span><span class="o">.</span><span class="n">Instance</span><span class="p">()</span> <span class="c1"># (1)!</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>        <span class="c1"># Can&#39;t select vacuum as it hase density 0 -&gt; G4_Galactic has very low density</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>        <span class="n">world_material</span> <span class="o">=</span> <span class="n">nist</span><span class="o">.</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s2">&quot;G4_Galactic&quot;</span><span class="p">)</span> <span class="c1"># (2)!</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>        <span class="c1"># VACUUM BOX CONSTRUCTION</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>        <span class="n">solidWorld</span> <span class="o">=</span> <span class="n">G4Box</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeZ</span><span class="p">)</span> <span class="c1"># (3)!</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>        <span class="n">logicWorld</span> <span class="o">=</span> <span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span> <span class="n">world_material</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">)</span> <span class="c1"># (4)!</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>        <span class="n">physWorld</span> <span class="o">=</span> <span class="n">G4PVPlacement</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># (5)!</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>                                <span class="n">G4ThreeVector</span><span class="p">(),</span>  
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>                                <span class="n">logicWorld</span><span class="p">,</span>  
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>                                <span class="s2">&quot;World&quot;</span><span class="p">,</span> 
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>                                <span class="kc">None</span><span class="p">,</span>  
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>                                <span class="kc">False</span><span class="p">,</span>  
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>                                <span class="mi">0</span><span class="p">,</span>  
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>                                <span class="kc">True</span><span class="p">)</span>  
</span></code></pre></div>
<ol>
<li>There is a <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">list of predefined materials</a> that we can use. Alternatively, we can <a href="#definition-of-custom-material">define the material ourselves</a>.</li>
<li>There is not exactly vacuum in Geant4, so we select the material with the lowest density instead. The list of possible materials is <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">here</a>.</li>
<li>This is the <em>solid volume</em> definition step: it defines the dimensions of the material. <strong>The parameters are: name, X length, Y length, Z length.</strong></li>
<li>Here we take the <em>solid volume</em> defined on the previous line and assign the material to it.</li>
<li>Finally, we place the volume as the <em>physical volume</em>. The arguments are following: <ol>
<li>rotation of the volume (we do not want to rotate that)</li>
<li>position in space (no need to overthink, we put it in the center),</li>
<li>the <em>logic volume</em> that we want to use (the one we defined on previous line),</li>
<li>the name of the volume,</li>
<li>parent volume (this is the top volume, so there is no parent volume),</li>
<li>bool options if we want to add multiple instances of this volume (we don't want that here),</li>
<li>number of copies (again, we do not want that here),</li>
<li>bool option for volume check: checks overlaps of volumes, which may cause problems in the simulations (<strong>we almost always want this on</strong>).</li>
</ol>
</li>
<li>Thanks to <code>from geant4_pybind import *</code> we also imported the units namelist from Geant4 and therefore we can use the standard units like this (it just effectively multiplies it by the appropriate factor to match the base units Geant4 works with).</li>
</ol>
</div>
</div>
</div>
<p>Similarly, we can implement the golden foil itself: we need to use different dimension, different material, and we want to place the foil inside the vacuum box <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/></svg></span> we select the vacuum box as the parent volume. We continue in the <code>Construct</code> method:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">C++</label><label for="__tabbed_5_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">src/construction.cc</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">...</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1">// The construction method that we worked with</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">DetectorConstruction</span><span class="o">::</span><span class="n">Construct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="c1">// Implementation of the vacuum box from above</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="c1">// After that, we want to add the golden foil</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">foilMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nist</span><span class="o">-&gt;</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s">&quot;G4_Au&quot;</span><span class="p">);</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">solidFoil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Box</span><span class="p">(</span><span class="s">&quot;Foil&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="p">);</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">logicFoil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidFoil</span><span class="p">,</span><span class="w"> </span><span class="n">foilMaterial</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Foil&quot;</span><span class="p">);</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">physFoilVolume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4PVPlacement</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span><span class="w">                  </span><span class="c1">// no rotation</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">                                                        </span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">),</span><span class="w">  </span><span class="c1">// position in the center</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">                                                        </span><span class="n">logicFoil</span><span class="p">,</span><span class="w">                  </span><span class="c1">// corresponding logical volume</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">                                                        </span><span class="s">&quot;Foil&quot;</span><span class="p">,</span><span class="w">                     </span><span class="c1">// name</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">                                                        </span><span class="n">logicWorld</span><span class="p">,</span><span class="w">                 </span><span class="c1">// parent volume</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">                                                        </span><span class="nb">false</span><span class="p">,</span><span class="w">                      </span><span class="c1">// no multiples</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">                                                        </span><span class="mi">0</span><span class="p">,</span><span class="w">                          </span><span class="c1">// no copies</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">                                                        </span><span class="nb">true</span><span class="p">);</span><span class="w">                      </span><span class="c1">// check for overlaps</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">                                                        </span><span class="c1">//(1)! </span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Note that we use the <code>logicWorld</code> (vacuum box defined above) as the parent volume.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or construction.py</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="k">class</span> <span class="nc">Construction</span><span class="p">(</span><span class="n">G4VUserDetectorConstruction</span><span class="p">):</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    <span class="k">def</span> <span class="nf">Construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>        <span class="c1"># Implementation of the vacuum box from above</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>        <span class="o">...</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>        <span class="c1"># After that, we want to add the golden foil</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>        <span class="n">foil_material</span> <span class="o">=</span> <span class="n">nist</span><span class="o">.</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s2">&quot;G4_Au&quot;</span><span class="p">)</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>        <span class="n">solidFoil</span> <span class="o">=</span> <span class="n">G4Box</span><span class="p">(</span><span class="s2">&quot;Foil&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeZ</span><span class="p">)</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>        <span class="n">logicFoil</span> <span class="o">=</span> <span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidFoil</span><span class="p">,</span> <span class="n">foil_material</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Foil&quot;</span><span class="p">)</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>        <span class="n">physFoil</span> <span class="o">=</span> <span class="n">G4PVPlacement</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>              <span class="c1"># no rotation</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>                                <span class="n">G4ThreeVector</span><span class="p">(),</span>    <span class="c1"># position in the center</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>                                <span class="n">logicFoil</span><span class="p">,</span>          <span class="c1"># corresponding logical volume</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>                                <span class="s2">&quot;Foil&quot;</span><span class="p">,</span>             <span class="c1"># name</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>                                <span class="n">logicWorld</span><span class="p">,</span>         <span class="c1"># parent volume </span>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>                                <span class="kc">True</span><span class="p">,</span>               <span class="c1"># no multiples</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>                                <span class="mi">0</span><span class="p">,</span>                  <span class="c1"># no copies</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>                                <span class="kc">True</span><span class="p">)</span>               <span class="c1"># check for overlaps</span>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>                                <span class="c1"># (1)! </span>
</span></code></pre></div>
<ol>
<li>Note that we use the <code>logicWorld</code> (vacuum box defined above) as the parent volume.</li>
</ol>
</div>
</div>
</div>
<details class="example">
<summary>Full example</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">C++</label><label for="__tabbed_6_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">include/construction.hh</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cp">#ifndef DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cp">#define DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VUserDetectorConstruction.hh&quot;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VPhysicalVolume.hh&quot;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="n">class</span><span class="w"> </span><span class="n">DetectorConstruction</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VUserDetectorConstruction</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// (1)!</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="o">~</span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">Construct</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)!</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="p">};</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="cp">#endif </span><span class="c1">//DETECTORCONSTRUCTION_HH</span>
</span></code></pre></div>
<ol>
<li>We derive our class from the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4VUserDetectorConstruction.html"><code>G4VUserDetectorConstruction</code> class</a>.</li>
<li>This is the actual method that we will use in the <code>src/construction.cc</code> to construct the volume (see bellow).</li>
</ol>
<div class="language-c highlight"><span class="filename">src/construction.cc</span><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// Geant4 includes</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Box.hh&gt;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4SystemOfUnits.hh&gt;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4NistManager.hh&gt;</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4LogicalVolume.hh&gt;</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4PVPlacement.hh&gt;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VPhysicalVolume.hh&gt;</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Material.hh&gt;</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="c1">// We include the header file</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/construction.hh&quot;</span><span class="c1"> // (1)!</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="c1">// Simple constructor and destructor</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="n">DetectorConstruction</span><span class="o">::</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="n">DetectorConstruction</span><span class="o">::~</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="c1">// Construction method itself</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">DetectorConstruction::Construct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">    </span><span class="c1">// We define the foil size and the world size</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cm</span><span class="p">;</span><span class="w"> </span><span class="c1">// (7)!</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">um</span><span class="p">;</span>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.2</span><span class="p">;</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">;</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="w">    </span><span class="c1">// We create an instance of the material manager</span>
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="w">    </span><span class="n">G4NistManager</span><span class="w"> </span><span class="o">*</span><span class="n">nist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">();</span><span class="w"> </span><span class="c1">// (2)!</span>
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="w">    </span><span class="c1">// VACUUM BOX CONSTRUCTION</span>
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">worldMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nist</span><span class="o">-&gt;</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s">&quot;G4_Galactic&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (3)!</span>
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">solidWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Box</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="n">world_sizeZ</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4)!</span>
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">logicWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span><span class="w"> </span><span class="n">worldMaterial</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;World&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (5)!</span>
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a>
</span><span id="__span-11-34"><a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">physWorldVolume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4PVPlacement</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span><span class="w">  </span><span class="c1">// (6)!</span>
</span><span id="__span-11-35"><a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="w">                                                        </span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">),</span>
</span><span id="__span-11-36"><a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a><span class="w">                                                        </span><span class="n">logicWorld</span><span class="p">,</span>
</span><span id="__span-11-37"><a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a><span class="w">                                                        </span><span class="s">&quot;World&quot;</span><span class="p">,</span>
</span><span id="__span-11-38"><a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a><span class="w">                                                        </span><span class="n">nullptr</span><span class="p">,</span>
</span><span id="__span-11-39"><a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a><span class="w">                                                        </span><span class="nb">false</span><span class="p">,</span>
</span><span id="__span-11-40"><a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a><span class="w">                                                        </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-11-41"><a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a><span class="w">                                                        </span><span class="nb">true</span>
</span><span id="__span-11-42"><a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-11-43"><a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>
</span><span id="__span-11-44"><a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a><span class="w">    </span><span class="c1">// After that, we want to add the golden foil</span>
</span><span id="__span-11-45"><a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">foilMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nist</span><span class="o">-&gt;</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s">&quot;G4_Au&quot;</span><span class="p">);</span>
</span><span id="__span-11-46"><a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">solidFoil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Box</span><span class="p">(</span><span class="s">&quot;Foil&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="p">);</span>
</span><span id="__span-11-47"><a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">logicFoil</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidFoil</span><span class="p">,</span><span class="w"> </span><span class="n">foilMaterial</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Foil&quot;</span><span class="p">);</span>
</span><span id="__span-11-48"><a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a>
</span><span id="__span-11-49"><a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">physFoilVolume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4PVPlacement</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span><span class="w">                  </span><span class="c1">// no rotation</span>
</span><span id="__span-11-50"><a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a><span class="w">                                                        </span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">),</span><span class="w">  </span><span class="c1">// position in the center</span>
</span><span id="__span-11-51"><a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a><span class="w">                                                        </span><span class="n">logicFoil</span><span class="p">,</span><span class="w">                  </span><span class="c1">// corresponding logical volume</span>
</span><span id="__span-11-52"><a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a><span class="w">                                                        </span><span class="s">&quot;Foil&quot;</span><span class="p">,</span><span class="w">                     </span><span class="c1">// name</span>
</span><span id="__span-11-53"><a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a><span class="w">                                                        </span><span class="n">logicWorld</span><span class="p">,</span><span class="w">                 </span><span class="c1">// parent volume</span>
</span><span id="__span-11-54"><a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a><span class="w">                                                        </span><span class="nb">false</span><span class="p">,</span><span class="w">                      </span><span class="c1">// no multiples</span>
</span><span id="__span-11-55"><a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a><span class="w">                                                        </span><span class="mi">0</span><span class="p">,</span><span class="w">                          </span><span class="c1">// no copies</span>
</span><span id="__span-11-56"><a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a><span class="w">                                                        </span><span class="nb">true</span><span class="p">);</span><span class="w">                      </span><span class="c1">// check for overlaps</span>
</span><span id="__span-11-57"><a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a><span class="w">                                                        </span><span class="c1">//(8)! </span>
</span><span id="__span-11-58"><a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>This header file must include the definition of the classes that are implemented in this file.   </li>
<li>There is a <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">list of predefined materials</a> that we can use. Alternatively, we can <a href="#definition-of-custom-material">define the material ourselves</a>.</li>
<li>There is not exactly vacuum in Geant4, so we select the material with the lowest density instead. The list of possible materials is <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">here</a>.</li>
<li>This is the <em>solid volume</em> definition step: it defines the dimensions of the material. <strong>The parameters are: name, X length, Y length, Z length.</strong></li>
<li>Here we take the <em>solid volume</em> defined on the previous line and assign the material to it. The last argument is the (arbitrary) name.</li>
<li>Finally, we place the volume as the <em>physical volume</em>. The arguments are following: </li>
<li>rotation of the volume (we do not want to rotate that)</li>
<li>position in space (no need to overthink, we put it in the center),</li>
<li>the <em>logic volume</em> that we want to use (the one we defined on previous line),</li>
<li>the name of the volume,</li>
<li>parent volume (this is the top volume, so there is no parent volume),</li>
<li>bool options if we want to add multiple instances of this volume (we don't want that here),</li>
<li>number of copies (again, we do not want that here),</li>
<li>bool option for volume check: checks overlaps of volumes, which may cause problems in the simulations (<strong>we almost always want this on</strong>).</li>
<li>Thanks to <code>#include &lt;G4SystemOfUnits.hh&gt;</code> we can use the standard units (it just effectively multiplies it by the appropriate factor to match the base units Geant4 works with).</li>
<li>Note that we use the <code>logicWorld</code> (vacuum box defined above) as the parent volume.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or construction.py</span><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">class</span> <span class="nc">Construction</span><span class="p">(</span><span class="n">G4VUserDetectorConstruction</span><span class="p">):</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="k">def</span> <span class="nf">Construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>        <span class="c1"># We define the foil size and the world size</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        <span class="n">foil_sizeXY</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span> <span class="c1"># (6)!</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>        <span class="n">foil_sizeZ</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">um</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        <span class="n">world_sizeXY</span> <span class="o">=</span> <span class="n">foil_sizeXY</span> <span class="o">*</span> <span class="mf">1.2</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        <span class="n">world_sizeZ</span> <span class="o">=</span> <span class="n">foil_sizeZ</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        <span class="c1"># We create an instance of the material manager</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        <span class="n">nist</span> <span class="o">=</span> <span class="n">G4NistManager</span><span class="o">.</span><span class="n">Instance</span><span class="p">()</span> <span class="c1"># (1)!</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>        <span class="c1"># Can&#39;t select vacuum as it hase density 0 -&gt; G4_Galactic has very low density</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="n">world_material</span> <span class="o">=</span> <span class="n">nist</span><span class="o">.</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s2">&quot;G4_Galactic&quot;</span><span class="p">)</span> <span class="c1"># (2)!</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>        <span class="c1"># VACUUM BOX CONSTRUCTION</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>        <span class="n">solidWorld</span> <span class="o">=</span> <span class="n">G4Box</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeZ</span><span class="p">)</span> <span class="c1"># (3)!</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>        <span class="n">logicWorld</span> <span class="o">=</span> <span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span> <span class="n">world_material</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">)</span> <span class="c1"># (4)!</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>        <span class="n">physWorld</span> <span class="o">=</span> <span class="n">G4PVPlacement</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># (5)!</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>                                <span class="n">G4ThreeVector</span><span class="p">(),</span>  
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>                                <span class="n">logicWorld</span><span class="p">,</span>  
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>                                <span class="s2">&quot;World&quot;</span><span class="p">,</span> 
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>                                <span class="kc">None</span><span class="p">,</span>  
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>                                <span class="kc">False</span><span class="p">,</span>  
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>                                <span class="mi">0</span><span class="p">,</span>  
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>                                <span class="kc">True</span><span class="p">)</span>  
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>        <span class="c1"># After that, we want to add the golden foil</span>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>        <span class="n">foil_material</span> <span class="o">=</span> <span class="n">nist</span><span class="o">.</span><span class="n">FindOrBuildMaterial</span><span class="p">(</span><span class="s2">&quot;G4_Au&quot;</span><span class="p">)</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>        <span class="n">solidFoil</span> <span class="o">=</span> <span class="n">G4Box</span><span class="p">(</span><span class="s2">&quot;Foil&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">foil_sizeZ</span><span class="p">)</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>        <span class="n">logicFoil</span> <span class="o">=</span> <span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidFoil</span><span class="p">,</span> <span class="n">foil_material</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Foil&quot;</span><span class="p">)</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>        <span class="n">physFoil</span> <span class="o">=</span> <span class="n">G4PVPlacement</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>              <span class="c1"># no rotation</span>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>                                <span class="n">G4ThreeVector</span><span class="p">(),</span>    <span class="c1"># position in the center</span>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>                                <span class="n">logicFoil</span><span class="p">,</span>          <span class="c1"># corresponding logical volume</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>                                <span class="s2">&quot;Foil&quot;</span><span class="p">,</span>             <span class="c1"># name</span>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>                                <span class="n">logicWorld</span><span class="p">,</span>         <span class="c1"># parent volume </span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>                                <span class="kc">True</span><span class="p">,</span>               <span class="c1"># no multiples</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>                                <span class="mi">0</span><span class="p">,</span>                  <span class="c1"># no copies</span>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>                                <span class="kc">True</span><span class="p">)</span>               <span class="c1"># check for overlaps</span>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>                                <span class="c1"># (7)! </span>
</span></code></pre></div>
<ol>
<li>There is a <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">list of predefined materials</a> that we can use. Alternatively, we can <a href="#definition-of-custom-material">define the material ourselves</a>.</li>
<li>There is not exactly vacuum in Geant4, so we select the material with the lowest density instead. The list of possible materials is <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">here</a>.</li>
<li>This is the <em>solid volume</em> definition step: it defines the dimensions of the material. <strong>The parameters are: name, X length, Y length, Z length.</strong> <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4CSGSolid.html">List of other shapes</a>.</li>
<li>Here we take the <em>solid volume</em> defined on the previous line and assign the material to it.</li>
<li>Finally, we place the volume as the <em>physical volume</em>. The arguments are following: <ol>
<li>rotation of the volume (we do not want to rotate that)</li>
<li>position in space (no need to overthink, we put it in the center),</li>
<li>the <em>logic volume</em> that we want to use (the one we defined on previous line),</li>
<li>the name of the volume,</li>
<li>parent volume (this is the top volume, so there is no parent volume),</li>
<li>bool options if we want to add multiple instances of this volume (we don't want that here),</li>
<li>number of copies (again, we do not want that here),</li>
<li>bool option for volume check: checks overlaps of volumes, which may cause problems in the simulations (<strong>we almost always want this on</strong>).</li>
</ol>
</li>
<li>Thanks to <code>from geant4_pybind import *</code> we also imported the units namelist from Geant4 and therefore we can use the standard units like this (it just effectively multiplies it by the appropriate factor to match the base units Geant4 works with).</li>
<li>Note that we use the <code>logicWorld</code> (vacuum box defined above) as the parent volume.</li>
</ol>
</div>
</div>
</div>
</details>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Apart from the box that we have used, there are also other shapes (sphere, cone, ...), see the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4CSGSolid.html">list of shapes</a>.</p>
</div>
<h4 id="definition-of-custom-material">Definition of custom material<a class="headerlink" href="#definition-of-custom-material" title="Permanent link">造</a></h4>
<p>All elements are predefined in Geant4, the list of them can be found <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/Appendix/materialNames.html">here</a>. However, sometimes we need to create a compound from different elements. </p>
<p>For this we define our own material via the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4Material.html"><code>G4Material</code> class</a>. We define the density of the material and number of components, which we will add.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">C++</label><label for="__tabbed_7_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4Material.hh&quot;</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4Element.hh&quot;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4NistManager.hh&quot;</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1">// Get the predefined elements that our material comprises of</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;O&quot;</span><span class="p">);</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;N&quot;</span><span class="p">);</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="c1">// Define the material</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">G4Material</span><span class="o">*</span><span class="w"> </span><span class="n">MyMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Material</span><span class="p">(</span><span class="s">&quot;MyMaterial&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.2</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// name of the material, density, number of elements</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w"> </span><span class="c1">// 50% Carbon by weight</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">O</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">);</span><span class="w"> </span><span class="c1">// 30% Oxygen by weight</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">);</span><span class="w"> </span><span class="c1">// 20% Nitrogen by weight</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="c1"># Get the predefined elements that our material comprises of</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">C</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">O</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="n">N</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;N&quot;</span><span class="p">)</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1"># Define the material</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="n">MyMaterial</span> <span class="o">=</span> <span class="n">G4Material</span><span class="p">(</span><span class="s2">&quot;MyMaterial&quot;</span><span class="p">,</span> <span class="mf">1.2</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># name of the material, density, number of elements</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># 50% Carbon by weight</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">O</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>  <span class="c1"># 30% Oxygen by weight</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>  <span class="c1"># 20% Nitrogen by weight</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The material definition would be performed inside the <code>Construct</code> method in the <code>G4VUserDetectorConstruction</code> that we work with. </p>
<p>In other words, replace the line with <code>FindOrBuildMaterial</code> in the codes <a href="#construction-definition">here</a> by the lines above. </p>
</div>
<details class="example">
<summary>Full example</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">C++</label><label for="__tabbed_8_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">include/construction.hh</span><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="cp">#ifndef DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="cp">#define DETECTORCONSTRUCTION_HH</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VUserDetectorConstruction.hh&quot;</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4VPhysicalVolume.hh&quot;</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="n">class</span><span class="w"> </span><span class="n">DetectorConstruction</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VUserDetectorConstruction</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="o">~</span><span class="n">DetectorConstruction</span><span class="p">();</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">Construct</span><span class="p">();</span><span class="w"> </span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="p">};</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="cp">#endif </span><span class="c1">//DETECTORCONSTRUCTION_HH</span>
</span></code></pre></div>
<div class="language-c highlight"><span class="filename">src/construction.cc</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">// Geant4 includes</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Box.hh&gt;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4SystemOfUnits.hh&gt;</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4NistManager.hh&gt;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4LogicalVolume.hh&gt;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4PVPlacement.hh&gt;</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VPhysicalVolume.hh&gt;</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4Material.hh&gt;</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="hll"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;G4Element.hh&quot;</span>
</span></span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="c1">// We include the header file</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/construction.hh&quot;</span><span class="c1"> </span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="c1">// Simple constructor and destructor</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="n">DetectorConstruction</span><span class="o">::</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="n">DetectorConstruction</span><span class="o">::~</span><span class="n">DetectorConstruction</span><span class="p">(){};</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="c1">// Construction method itself</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="nf">DetectorConstruction::Construct</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="w">    </span><span class="c1">// We define the foil size and the world size</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cm</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1000.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">um</span><span class="p">;</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeXY</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1.2</span><span class="p">;</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">world_sizeZ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foil_sizeZ</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">;</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="w">    </span><span class="c1">// We create an instance of the material manager</span>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a><span class="w">    </span><span class="n">G4NistManager</span><span class="w"> </span><span class="o">*</span><span class="n">nist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">();</span><span class="w"> </span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a>
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="hll"><span class="w">    </span><span class="c1">// BOX CONSTRUCTION</span>
</span></span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31" href="#__codelineno-16-31"></a><span class="hll"><span class="w">    </span><span class="c1">// (1)!</span>
</span></span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32" href="#__codelineno-16-32"></a><span class="hll"><span class="w">    </span><span class="c1">// auto worldMaterial = nist-&gt;FindOrBuildMaterial(&quot;G4_Galactic&quot;); </span>
</span></span><span id="__span-16-33"><a id="__codelineno-16-33" name="__codelineno-16-33" href="#__codelineno-16-33"></a><span class="hll">
</span></span><span id="__span-16-34"><a id="__codelineno-16-34" name="__codelineno-16-34" href="#__codelineno-16-34"></a><span class="hll"><span class="w">    </span><span class="c1">// Get the predefined elements that our material comprises of</span>
</span></span><span id="__span-16-35"><a id="__codelineno-16-35" name="__codelineno-16-35" href="#__codelineno-16-35"></a><span class="hll"><span class="w">    </span><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span>
</span></span><span id="__span-16-36"><a id="__codelineno-16-36" name="__codelineno-16-36" href="#__codelineno-16-36"></a><span class="hll"><span class="w">    </span><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;O&quot;</span><span class="p">);</span>
</span></span><span id="__span-16-37"><a id="__codelineno-16-37" name="__codelineno-16-37" href="#__codelineno-16-37"></a><span class="hll"><span class="w">    </span><span class="n">G4Element</span><span class="o">*</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4NistManager</span><span class="o">::</span><span class="n">Instance</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;N&quot;</span><span class="p">);</span>
</span></span><span id="__span-16-38"><a id="__codelineno-16-38" name="__codelineno-16-38" href="#__codelineno-16-38"></a><span class="hll">
</span></span><span id="__span-16-39"><a id="__codelineno-16-39" name="__codelineno-16-39" href="#__codelineno-16-39"></a><span class="hll"><span class="w">    </span><span class="c1">// Define the material</span>
</span></span><span id="__span-16-40"><a id="__codelineno-16-40" name="__codelineno-16-40" href="#__codelineno-16-40"></a><span class="hll"><span class="w">    </span><span class="n">G4Material</span><span class="o">*</span><span class="w"> </span><span class="n">MyMaterial</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Material</span><span class="p">(</span><span class="s">&quot;MyMaterial&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">1.2</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"> </span><span class="c1">// name of the material, density, number of elements</span>
</span></span><span id="__span-16-41"><a id="__codelineno-16-41" name="__codelineno-16-41" href="#__codelineno-16-41"></a><span class="hll"><span class="w">    </span><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w"> </span><span class="c1">// 50% Carbon by weight</span>
</span></span><span id="__span-16-42"><a id="__codelineno-16-42" name="__codelineno-16-42" href="#__codelineno-16-42"></a><span class="hll"><span class="w">    </span><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">O</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">);</span><span class="w"> </span><span class="c1">// 30% Oxygen by weight</span>
</span></span><span id="__span-16-43"><a id="__codelineno-16-43" name="__codelineno-16-43" href="#__codelineno-16-43"></a><span class="hll"><span class="w">    </span><span class="n">MyMaterial</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">);</span><span class="w"> </span><span class="c1">// 20% Nitrogen by weight</span>
</span></span><span id="__span-16-44"><a id="__codelineno-16-44" name="__codelineno-16-44" href="#__codelineno-16-44"></a>
</span><span id="__span-16-45"><a id="__codelineno-16-45" name="__codelineno-16-45" href="#__codelineno-16-45"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">solidWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Box</span><span class="p">(</span><span class="s">&quot;World&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">world_sizeXY</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="n">world_sizeZ</span><span class="p">);</span><span class="w"> </span><span class="c1">// (4)!</span>
</span><span id="__span-16-46"><a id="__codelineno-16-46" name="__codelineno-16-46" href="#__codelineno-16-46"></a><span class="hll"><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">logicWorld</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span><span class="w"> </span><span class="n">MyMaterial</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;World&quot;</span><span class="p">);</span><span class="w"> </span>
</span></span><span id="__span-16-47"><a id="__codelineno-16-47" name="__codelineno-16-47" href="#__codelineno-16-47"></a>
</span><span id="__span-16-48"><a id="__codelineno-16-48" name="__codelineno-16-48" href="#__codelineno-16-48"></a><span class="w">    </span><span class="n">G4VPhysicalVolume</span><span class="w"> </span><span class="o">*</span><span class="n">physWorldVolume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4PVPlacement</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span><span class="w">  </span>
</span><span id="__span-16-49"><a id="__codelineno-16-49" name="__codelineno-16-49" href="#__codelineno-16-49"></a><span class="w">                                                        </span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">,</span><span class="w"> </span><span class="mf">0.</span><span class="p">),</span>
</span><span id="__span-16-50"><a id="__codelineno-16-50" name="__codelineno-16-50" href="#__codelineno-16-50"></a><span class="w">                                                        </span><span class="n">logicWorld</span><span class="p">,</span>
</span><span id="__span-16-51"><a id="__codelineno-16-51" name="__codelineno-16-51" href="#__codelineno-16-51"></a><span class="w">                                                        </span><span class="s">&quot;World&quot;</span><span class="p">,</span>
</span><span id="__span-16-52"><a id="__codelineno-16-52" name="__codelineno-16-52" href="#__codelineno-16-52"></a><span class="w">                                                        </span><span class="n">nullptr</span><span class="p">,</span>
</span><span id="__span-16-53"><a id="__codelineno-16-53" name="__codelineno-16-53" href="#__codelineno-16-53"></a><span class="w">                                                        </span><span class="nb">false</span><span class="p">,</span>
</span><span id="__span-16-54"><a id="__codelineno-16-54" name="__codelineno-16-54" href="#__codelineno-16-54"></a><span class="w">                                                        </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-16-55"><a id="__codelineno-16-55" name="__codelineno-16-55" href="#__codelineno-16-55"></a><span class="w">                                                        </span><span class="nb">true</span>
</span><span id="__span-16-56"><a id="__codelineno-16-56" name="__codelineno-16-56" href="#__codelineno-16-56"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-16-57"><a id="__codelineno-16-57" name="__codelineno-16-57" href="#__codelineno-16-57"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>This is what we used before in the <a href="#main-file">main file</a>. We replace it by our own material.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or construction.py</span><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">class</span> <span class="nc">Construction</span><span class="p">(</span><span class="n">G4VUserDetectorConstruction</span><span class="p">):</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="k">def</span> <span class="nf">Construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>        <span class="c1"># We define the foil size and the world size</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>        <span class="n">foil_sizeXY</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span> 
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>        <span class="n">foil_sizeZ</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">um</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>        <span class="n">world_sizeXY</span> <span class="o">=</span> <span class="n">foil_sizeXY</span> <span class="o">*</span> <span class="mf">1.2</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>        <span class="n">world_sizeZ</span> <span class="o">=</span> <span class="n">foil_sizeZ</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">cm</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>        <span class="c1"># We create an instance of the material manager</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>        <span class="n">nist</span> <span class="o">=</span> <span class="n">G4NistManager</span><span class="o">.</span><span class="n">Instance</span><span class="p">()</span> 
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="hll">        <span class="c1"># Can&#39;t select vacuum as it hase density 0 -&gt; G4_Galactic has very low density</span>
</span></span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="hll">        <span class="c1"># (1)!</span>
</span></span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="hll">        <span class="c1"># world_material = nist.FindOrBuildMaterial(&quot;G4_Galactic&quot;) </span>
</span></span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="hll">
</span></span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="hll">        <span class="c1"># Get the predefined elements that our material comprises of</span>
</span></span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="hll">        <span class="n">C</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>
</span></span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="hll">        <span class="n">O</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
</span></span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="hll">        <span class="n">N</span> <span class="o">=</span> <span class="n">G4Element</span><span class="o">.</span><span class="n">GetElement</span><span class="p">(</span><span class="s2">&quot;N&quot;</span><span class="p">)</span>
</span></span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="hll">
</span></span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="hll">        <span class="c1"># Define the material</span>
</span></span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="hll">        <span class="n">MyMaterial</span> <span class="o">=</span> <span class="n">G4Material</span><span class="p">(</span><span class="s2">&quot;MyMaterial&quot;</span><span class="p">,</span> <span class="mf">1.2</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># name of the material, density, number of elements</span>
</span></span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="hll">        <span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># 50% Carbon by weight</span>
</span></span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a><span class="hll">        <span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">O</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>  <span class="c1"># 30% Oxygen by weight</span>
</span></span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="hll">        <span class="n">MyMaterial</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>  <span class="c1"># 20% Nitrogen by weight</span>
</span></span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="hll">
</span></span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>        <span class="c1"># BOX CONSTRUCTION</span>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>        <span class="n">solidWorld</span> <span class="o">=</span> <span class="n">G4Box</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeXY</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">world_sizeZ</span><span class="p">)</span> 
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="hll">        <span class="n">logicWorld</span> <span class="o">=</span> <span class="n">G4LogicalVolume</span><span class="p">(</span><span class="n">solidWorld</span><span class="p">,</span> <span class="n">MyMaterial</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;World&quot;</span><span class="p">)</span> 
</span></span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>        <span class="n">physWorld</span> <span class="o">=</span> <span class="n">G4PVPlacement</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>  
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>                                <span class="n">G4ThreeVector</span><span class="p">(),</span>  
</span><span id="__span-17-36"><a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>                                <span class="n">logicWorld</span><span class="p">,</span>  
</span><span id="__span-17-37"><a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>                                <span class="s2">&quot;World&quot;</span><span class="p">,</span> 
</span><span id="__span-17-38"><a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>                                <span class="kc">None</span><span class="p">,</span>  
</span><span id="__span-17-39"><a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a>                                <span class="kc">False</span><span class="p">,</span>  
</span><span id="__span-17-40"><a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a>                                <span class="mi">0</span><span class="p">,</span>  
</span><span id="__span-17-41"><a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>                                <span class="kc">True</span><span class="p">)</span>  
</span></code></pre></div>
<ol>
<li>This is what we used before in the <a href="#main-file">main file</a>. We replace it by our own material.</li>
</ol>
</div>
</div>
</div>
</details>
<p>For advanced, the <code>G4Element</code> can be defined by us: this can be useful when we want to use specific isotopic composition. See the example bellow, where we want to create LiH with two different isotopes of lithium.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">C++</label><label for="__tabbed_9_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">G4Material</span><span class="w"> </span><span class="o">*</span><span class="n">LiH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Material</span><span class="p">(</span><span class="s">&quot;LiH&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">0.78</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// name, density</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="n">G4Isotope</span><span class="w"> </span><span class="o">*</span><span class="n">Li7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Isotope</span><span class="p">(</span><span class="s">&quot;Li7&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">);</span><span class="w"> </span><span class="c1">// name, atomic number Z, nucleon number N</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">G4Isotope</span><span class="w"> </span><span class="o">*</span><span class="n">Li6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Isotope</span><span class="p">(</span><span class="s">&quot;Li6&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span><span class="w"> </span><span class="c1">// name, atomic number Z, nucleon number N</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="n">G4Element</span><span class="w"> </span><span class="o">*</span><span class="n">Li</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4Element</span><span class="p">(</span><span class="s">&quot;Li&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Li&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// name, symbol, number of isotopes</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="c1">// We add the isotopes to Li</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="n">Li</span><span class="o">-&gt;</span><span class="n">AddIsotope</span><span class="p">(</span><span class="n">Li7</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">*</span><span class="n">perCent</span><span class="p">);</span><span class="w"> </span><span class="c1">// what isotope we add, its percentage</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="n">Li</span><span class="o">-&gt;</span><span class="n">AddIsotope</span><span class="p">(</span><span class="n">Li6</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="o">*</span><span class="n">perCent</span><span class="p">);</span><span class="w"> </span><span class="c1">// what isotope we add, its percentage</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="c1">// Finaly we make the LiH: which means adding 1 atom of Li and 1 atom of H</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="n">LiH</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">Li</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// element we are adding, number of atoms</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="n">LiH</span><span class="o">-&gt;</span><span class="n">AddElement</span><span class="p">(</span><span class="n">nist</span><span class="o">-&gt;</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s">&quot;H&quot;</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// element we are adding, number of atoms</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">LiH</span> <span class="o">=</span> <span class="n">G4Material</span><span class="p">(</span><span class="s2">&quot;LiH&quot;</span><span class="p">,</span> <span class="mf">0.78</span><span class="o">*</span><span class="n">g</span><span class="o">/</span><span class="n">cm3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># name, density</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">Li7</span> <span class="o">=</span> <span class="n">G4Isotope</span><span class="p">(</span><span class="s2">&quot;Li7&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>  <span class="c1"># name, atomic number Z, nucleon number N</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">Li6</span> <span class="o">=</span> <span class="n">G4Isotope</span><span class="p">(</span><span class="s2">&quot;Li6&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># name, atomic number Z, nucleon number N</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">Li</span> <span class="o">=</span> <span class="n">G4Element</span><span class="p">(</span><span class="s2">&quot;Li&quot;</span><span class="p">,</span> <span class="s2">&quot;Li&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># name, symbol, number of isotopes</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="c1"># We add the isotopes to Li</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="n">Li</span><span class="o">.</span><span class="n">AddIsotope</span><span class="p">(</span><span class="n">Li7</span><span class="p">,</span> <span class="mi">5</span><span class="o">*</span><span class="n">perCent</span><span class="p">)</span> <span class="c1"># what isotope we add, its percentage</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="n">Li</span><span class="o">.</span><span class="n">AddIsotope</span><span class="p">(</span><span class="n">Li6</span><span class="p">,</span> <span class="mi">95</span><span class="o">*</span><span class="n">perCent</span><span class="p">)</span> <span class="c1"># what isotope we add, its percentage</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="c1"># Finaly we make the LiH: which means adding 1 atom of Li and 1 atom of H</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">LiH</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">Li</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># element we are adding, number of atoms</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="n">LiH</span><span class="o">.</span><span class="n">AddElement</span><span class="p">(</span><span class="n">nist</span><span class="o">.</span><span class="n">FindOrBuildElement</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># element we are adding, number of atoms</span>
</span></code></pre></div>
</div>
</div>
</div>
<h3 id="physics-list-definition">Physics list definition<a class="headerlink" href="#physics-list-definition" title="Permanent link">造</a></h3>
<p>One could either define own physics list or use a <a href="https://geant4-internal.web.cern.ch/support/physics_lists">predefined one</a>. </p>
<h4 id="using-predefined-physics-list">Using predefined physics list<a class="headerlink" href="#using-predefined-physics-list" title="Permanent link">造</a></h4>
<p>To use a predefined physics list, we need to create an instance of that physics list in the <a href="#main-file">main file</a> and set in using the <code>SetUserInitialization</code> method. In this case, we no longer need the <code>physicsList.hh</code> and <code>physicsList.cc</code> files. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">C++</label><label for="__tabbed_10_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">mainFile.cc</span><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;QBBC.hh&quot;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="c1">// other includes</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="c1">// (1)!</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">){</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="n">G4VModularPhysicsList</span><span class="w"> </span><span class="o">*</span><span class="n">physicsList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">QBBC</span><span class="p">;</span><span class="w"> </span><span class="c1">// QGSC + BinaryCascade + Bertini + CHIPS</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="c1">//physicsList-&gt;RegisterPhysics (new G4OpticalPhysics()); // Cv. part one</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="n">runManager</span><span class="o">-&gt;</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">physicsList</span><span class="p">);</span><span class="w"> </span><span class="c1">// adds physics list</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="p">...</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>This is the main file presented in the <a href="#main-file">Main file section</a>.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="c1"># (1!</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="o">...</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>    <span class="n">runManager</span><span class="o">.</span><span class="n">SetUserInitialization</span><span class="p">(</span><span class="n">QBBC</span><span class="p">())</span> <span class="c1"># QGSC + BinaryCascade + Bertini + CHIPS</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="o">...</span>
</span></code></pre></div>
<ol>
<li>This is the main file presented in the <a href="#main-file">Main file section</a>.</li>
</ol>
</div>
</div>
</div>
<p>In other words, there is only change in the <a href="#main-file">main file</a> depending on what predefined physics list we choose.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Find the list of predefined physics list <a href="https://geant4-internal.web.cern.ch/support/physics_lists">here</a>.</p>
</div>
<h4 id="using-own-physics-list">Using own physics list<a class="headerlink" href="#using-own-physics-list" title="Permanent link">造</a></h4>
<p>To define own physics list, we will use the <a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4VModularPhysicsList.html"><code>G4VModularPhysicsList</code> class</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">C++</label><label for="__tabbed_11_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">include/physicsList.hh</span><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="cp">#ifndef PHYSICSLIST_HH</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="cp">#define PHYSICSLIST_HH</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VModularPhysicsList.hh&gt;</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="n">class</span><span class="w"> </span><span class="n">PhysicsList</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VModularPhysicsList</span><span class="p">{</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">    </span><span class="n">PhysicsList</span><span class="p">();</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="o">~</span><span class="n">PhysicsList</span><span class="p">();</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="p">};</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="cp">#endif </span><span class="c1">//PHYSICSLIST_HH</span>
</span></code></pre></div>
<div class="language-c highlight"><span class="filename">src/physicsList.cc</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4EmStandardPhysics.hh&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4DecayPhysics.hh&gt;</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4EmLowEPPhysics.hh&gt;</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/physicsList.hh&quot;</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="n">PhysicsList</span><span class="o">::</span><span class="n">PhysicsList</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">    </span><span class="n">RegisterPhysics</span><span class="w"> </span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">G4EmStandardPhysics</span><span class="p">());</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">    </span><span class="n">RegisterPhysics</span><span class="w"> </span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">G4EmLowEPPhysics</span><span class="p">());</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">    </span><span class="n">RegisterPhysics</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">G4DecayPhysics</span><span class="p">());</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="p">}</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="n">PhysicsList</span><span class="o">::~</span><span class="n">PhysicsList</span><span class="p">()</span><span class="w"> </span><span class="p">{};</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or physicsList.py</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="k">class</span> <span class="nc">PhysicsList</span><span class="p">(</span><span class="n">G4VModularPhysicsList</span><span class="p">):</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        <span class="c1"># Default physics</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">RegisterPhysics</span><span class="p">(</span><span class="n">G4DecayPhysics</span><span class="p">())</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>        <span class="c1"># EM physics</span>
</span><span id="__span-24-12"><a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">RegisterPhysics</span><span class="p">(</span><span class="n">G4EmStandardPhysics</span><span class="p">())</span>
</span><span id="__span-24-13"><a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>
</span><span id="__span-24-14"><a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>        <span class="c1"># Decay physics</span>
</span><span id="__span-24-15"><a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">RegisterPhysics</span><span class="p">(</span><span class="n">G4DecayPhysics</span><span class="p">())</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Note that the <code>mainFile.cc</code> of <code>mainFile.py</code> would be exactly same as <a href="#main-file">here</a> in this case. </p>
<h3 id="action-definition">Action definition<a class="headerlink" href="#action-definition" title="Permanent link">造</a></h3>
<p>The action class allows us to define, among others, particle definition and particle detection. </p>
<p>We will inherit from <a href="https://apc.u-paris.fr/~franco/g4doxy4.10/html/class_g4_v_user_action_initialization.html"><code>G4VUserActionInitialization</code> class</a> for our action class.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">C++</label><label for="__tabbed_12_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">include/action.hh</span><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="cp">#ifndef ACTION_HH</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="cp">#define ACTION_HH</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VUserActionInitialization.hh&gt;</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="n">class</span><span class="w"> </span><span class="n">ActionInitialization</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VUserActionInitialization</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="w">    </span><span class="n">ActionInitialization</span><span class="p">();</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">    </span><span class="o">~</span><span class="n">ActionInitialization</span><span class="p">();</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">    </span><span class="n">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">Build</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"> </span><span class="c1">// this is the method that we will work with</span>
</span><span id="__span-25-11"><a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="p">};</span>
</span><span id="__span-25-12"><a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
</span><span id="__span-25-13"><a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
</span><span id="__span-25-14"><a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="cp">#endif </span><span class="c1">//ACTION_HH</span>
</span></code></pre></div>
<div class="language-c highlight"><span class="filename">src/action.cc</span><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/action.hh&quot;</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="n">ActionInitialization</span><span class="o">::</span><span class="n">ActionInitialization</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="n">ActionInitialization</span><span class="o">::~</span><span class="n">ActionInitialization</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ActionInitialization::Build</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="c1">// we will add our actions here</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or action.py</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="k">class</span> <span class="nc">ActionInitialization</span><span class="p">(</span><span class="n">G4VUserActionInitialization</span><span class="p">):</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="k">def</span> <span class="nf">Build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>        <span class="c1"># we will add our actions here</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>        <span class="k">pass</span>
</span></code></pre></div>
</div>
</div>
</div>
<p>Now, we have the main action class. Now we may define various actions (e.g. particle generation) and then insert the back into the <code>Build</code> method, that will be triggered for each event, in the first run, in the last run ...</p>
<h4 id="define-primary-particle-generation">Define primary particle generation<a class="headerlink" href="#define-primary-particle-generation" title="Permanent link">造</a></h4>
<p>For generation of primary particles, we will make use of </p>
<ul>
<li><a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4VUserPrimaryGeneratorAction.html"><code>G4VUserPrimaryGeneratorAction</code> class</a> to specify the particle and trigger the generation during the run,</li>
<li><a href="https://apc.u-paris.fr/~franco/g4doxy/html/classG4ParticleGun.html"><code>G4ParticleGun</code> class</a> to generate the particles.</li>
</ul>
<p>In this example, we define 100 MeV electrons with momentum in the forward (z) direction only.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">C++</label><label for="__tabbed_13_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>We need to create two additional files: <code>include/particleGenerator.hh</code> and <code>src/particleGenerator.cc</code>.</p>
<div class="language-c highlight"><span class="filename">include/particleGenerator.hh</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="cp">#ifndef PARTICLEGENERATOR_HH</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="cp">#define ARTICLEGENERATOR_HH</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4VUserPrimaryGeneratorAction.hh&gt;</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4ParticleGun.hh&gt;</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="n">class</span><span class="w"> </span><span class="n">particleGenerator</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">G4VUserPrimaryGeneratorAction</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="n">public</span><span class="o">:</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="n">particleGenerator</span><span class="p">();</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">    </span><span class="o">~</span><span class="n">particleGenerator</span><span class="p">();</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>
</span><span id="__span-28-12"><a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="w">    </span><span class="c1">// all setup will be defined in this method</span>
</span><span id="__span-28-13"><a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="w">    </span><span class="n">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">GeneratePrimaries</span><span class="p">(</span><span class="n">G4Event</span><span class="w"> </span><span class="o">*</span><span class="n">anEvent</span><span class="p">);</span>
</span><span id="__span-28-14"><a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="n">private</span><span class="o">:</span>
</span><span id="__span-28-15"><a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">    </span><span class="n">G4ParticleGun</span><span class="w"> </span><span class="o">*</span><span class="n">fParticleGun</span><span class="p">;</span><span class="w"> </span><span class="c1">// this is the particle gun itself</span>
</span><span id="__span-28-16"><a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="p">};</span>
</span><span id="__span-28-17"><a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>
</span><span id="__span-28-18"><a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a>
</span><span id="__span-28-19"><a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="cp">#endif </span><span class="c1">//PARTICLEGENERATOR_HH</span>
</span></code></pre></div>
<div class="language-c highlight"><span class="filename">src/particleGenerator.cc</span><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/particleGenerator.hh&quot;</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4ParticleTable.hh&gt;</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;G4SystemOfUnits.hh&gt;</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1">// CONSTRUCTOR</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="n">particleGenerator</span><span class="o">::</span><span class="n">particleGenerator</span><span class="p">(){</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="c1">// we create the particle generator itself</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">G4ParticleGun</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// argument is the number of primary vertices, see the comment box bellow</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="c1">// select electron</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="n">G4ParticleTable</span><span class="o">*</span><span class="w"> </span><span class="n">particleTable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">G4ParticleTable</span><span class="o">::</span><span class="n">GetParticleTable</span><span class="p">();</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">    </span><span class="n">G4String</span><span class="w"> </span><span class="n">particleName</span><span class="p">;</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">    </span><span class="n">G4ParticleDefinition</span><span class="o">*</span><span class="w"> </span><span class="n">particle</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="n">particleTable</span><span class="o">-&gt;</span><span class="n">FindParticle</span><span class="p">(</span><span class="n">particleName</span><span class="o">=</span><span class="s">&quot;e-&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)!</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">    </span><span class="c1">// we tell the particle gun to create an electron ...</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="o">-&gt;</span><span class="n">SetParticleDefinition</span><span class="p">(</span><span class="n">particle</span><span class="p">);</span>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="c1">// ... in the forward (z) direction ...</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="o">-&gt;</span><span class="n">SetParticleMomentumDirection</span><span class="p">(</span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">));</span><span class="w"> </span><span class="c1">// x, y, z</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">    </span><span class="c1">// ... with energy of 100 MeV ...</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="o">-&gt;</span><span class="n">SetParticleEnergy</span><span class="p">(</span><span class="mf">100.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">MeV</span><span class="p">);</span>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="w">    </span><span class="c1">// ... and the position of the source</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="o">-&gt;</span><span class="n">SetParticlePosition</span><span class="p">(</span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cm</span><span class="p">));</span><span class="w"> </span><span class="c1">// x, y, z</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="p">}</span>
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a>
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a><span class="c1">// DESTRUCTOR</span>
</span><span id="__span-29-28"><a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a><span class="n">particleGenerator</span><span class="o">::~</span><span class="n">particleGenerator</span><span class="p">(){</span>
</span><span id="__span-29-29"><a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a><span class="w">    </span><span class="n">delete</span><span class="w"> </span><span class="n">fParticleGun</span><span class="p">;</span>
</span><span id="__span-29-30"><a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a><span class="p">}</span>
</span><span id="__span-29-31"><a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a>
</span><span id="__span-29-32"><a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a><span class="c1">// this is the method that generates the particles for each event</span>
</span><span id="__span-29-33"><a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a><span class="kt">void</span><span class="w"> </span><span class="n">particleGenerator</span><span class="o">::</span><span class="n">GeneratePrimaries</span><span class="p">(</span><span class="n">G4Event</span><span class="w"> </span><span class="o">*</span><span class="n">anEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-29-34"><a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a><span class="w">    </span><span class="n">fParticleGun</span><span class="o">-&gt;</span><span class="n">GeneratePrimaryVertex</span><span class="p">(</span><span class="n">anEvent</span><span class="p">);</span>
</span><span id="__span-29-35"><a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>Most particles are already predefined, so we use the predefined electron.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">from</span> <span class="nn">geant4_pybind</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">class</span> <span class="nc">particleGenerator</span><span class="p">(</span><span class="n">G4VUserPrimaryGeneratorAction</span><span class="p">):</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">electronEnergy</span><span class="p">):</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>        <span class="c1"># we create the particle generator itself</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span> <span class="o">=</span> <span class="n">G4ParticleGun</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># argument is the number of primary vertices, see the comment box bellow</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>        <span class="c1"># we tell the particle gun to create an electron ...</span>
</span><span id="__span-30-11"><a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span><span class="o">.</span><span class="n">SetParticleDefinition</span><span class="p">(</span><span class="n">G4Electron</span><span class="o">.</span><span class="n">Definition</span><span class="p">())</span>
</span><span id="__span-30-12"><a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>        <span class="c1"># ... in the forward (z) direction ...</span>
</span><span id="__span-30-13"><a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span><span class="o">.</span><span class="n">SetParticleMomentumDirection</span><span class="p">(</span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="c1"># x, y, z</span>
</span><span id="__span-30-14"><a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>        <span class="c1"># ... with energy of 100 MeV ...</span>
</span><span id="__span-30-15"><a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span><span class="o">.</span><span class="n">SetParticleEnergy</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">MeVs</span><span class="p">)</span>
</span><span id="__span-30-16"><a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>        <span class="c1"># ... and the position of the source</span>
</span><span id="__span-30-17"><a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span><span class="o">.</span><span class="n">SetParticlePosition</span><span class="p">(</span><span class="n">G4ThreeVector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">cm</span><span class="p">))</span> <span class="c1"># x, y, z </span>
</span><span id="__span-30-18"><a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>
</span><span id="__span-30-19"><a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>    <span class="k">def</span> <span class="nf">GeneratePrimaries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="__span-30-20"><a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fParticleGun</span><span class="o">.</span><span class="n">GeneratePrimaryVertex</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></code></pre></div>
</div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>When creating the particle gun using the <code>G4ParticleGun</code> class, we used <code>1</code> as the argument: this is the number of primary vertices. However, typically, we want to simulate more than one particle to gain some statistics.</p>
<p>This is because the convention in Geant4 is to generate one particle per event and have the number of events corresponding to the total number of particles we want to simulate. </p>
<p>Also note, that there are no collective effects implemented into Geant4: therefore, multiple primary particles generated in the event do not affect each other. </p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Note that we are using the standard units (cm, MeV). This is thanks to the <code>#include &lt;G4SystemOfUnits.hh&gt;</code> in <code>C++</code> and  <code>from geant4_pybind import *</code> in <code>Python</code>.</p>
</div>
<p>Finally, we need to add this action to the main action class created in <a href="#action-definition">Action definition</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">C++</label><label for="__tabbed_14_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-c highlight"><span class="filename">src/action.cc</span><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/action.hh&quot;</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="hll"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../include/particleGenerator.hh&quot;</span>
</span></span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="n">ActionInitialization</span><span class="o">::</span><span class="n">ActionInitialization</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="n">ActionInitialization</span><span class="o">::~</span><span class="n">ActionInitialization</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="kt">void</span><span class="w"> </span><span class="nf">ActionInitialization::Build</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="hll"><span class="w">    </span><span class="c1">// particle generation action</span>
</span></span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="hll"><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">particleGenerator</span><span class="p">();</span>
</span></span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="hll"><span class="w">    </span><span class="n">SetUserAction</span><span class="p">(</span><span class="n">generator</span><span class="p">);</span>
</span></span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="p">}</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><span class="filename">mainFile.py or action.py</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">class</span> <span class="nc">ActionInitialization</span><span class="p">(</span><span class="n">G4VUserActionInitialization</span><span class="p">):</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>    <span class="k">def</span> <span class="nf">Build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="hll">        <span class="n">generator</span> <span class="o">=</span> <span class="n">particleGenerator</span><span class="p">()</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">SetUserAction</span><span class="p">(</span><span class="n">generator</span><span class="p">)</span>
</span></span></code></pre></div>
<ol>
<li>Provided that the definition of <code>particleGenerator</code> class is in the same file or is properly imported (it is the class that we created at the beginning of <a href="#define-primary-particle-generation">Define primary particle section</a>).</li>
</ol>
</div>
</div>
</div>
<h4 id="define-particle-detection">Define particle detection<a class="headerlink" href="#define-particle-detection" title="Permanent link">造</a></h4>
<h3 id="running-the-simulation">Running the simulation<a class="headerlink" href="#running-the-simulation" title="Permanent link">造</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="15:2"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">C++</label><label for="__tabbed_15_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The environment with Geant4 must be correctly intialized.</p>
<p>Due to the multiple files we have, we will use <a href="https://cmake.org/">CMake</a> for compilation, so the top directory must contain the <code>CMakeLists.txt</code> file. This is already set up in the provided examples.</p>
<details class="example">
<summary>Sample <code>CMakeLists.txt</code></summary>
<p>In the provided examples, the <code>CMakeLists.txt</code> is already set up. Nevertheless, when working with the file structure</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>mainFile.cc
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>CMakeLists.txt
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>include/
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    construction.hh
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>    physicsList.hh
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    action.hh
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>src/
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>    construction.cc
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>    physicsList.cc
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>    action.cc
</span></code></pre></div>
<p>The <code>CMakeLists.txt</code> contains:</p>
<div class="language-cmake highlight"><span class="filename">CMakeLists.txt</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">2.6</span><span class="w"> </span><span class="s">FATAL_ERROR</span><span class="p">)</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nb">project</span><span class="p">(</span><span class="s">example</span><span class="p">)</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="nb">find_package</span><span class="p">(</span><span class="s">Geant4</span><span class="w"> </span><span class="s">REQUIRED</span><span class="w"> </span><span class="s">ui_all</span><span class="w"> </span><span class="s">vis_all</span><span class="p">)</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="nb">include</span><span class="p">(</span><span class="o">${</span><span class="nv">Geant4_USE_FILE</span><span class="o">}</span><span class="p">)</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="nb">file</span><span class="p">(</span><span class="s">GLOB</span><span class="w"> </span><span class="s">sources</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="s">/src/*.cc</span><span class="p">)</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="nb">file</span><span class="p">(</span><span class="s">GLOB</span><span class="w"> </span><span class="s">headers</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_SOURCE_DIR</span><span class="o">}</span><span class="s">/include/*.hh</span><span class="p">)</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a><span class="nb">add_executable</span><span class="p">(</span><span class="s">mainFile</span><span class="w"> </span><span class="s">mainFile.cc</span><span class="w"> </span><span class="o">${</span><span class="nv">sources</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">headers</span><span class="o">}</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="w">        </span><span class="s">include/construction.hh</span>
</span><span id="__span-34-14"><a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="w">        </span><span class="s">src/physicsList.cc</span>
</span><span id="__span-34-15"><a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="w">        </span><span class="s">src/action.cc</span>
</span><span id="__span-34-16"><a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a><span class="w">        </span><span class="s">include/construction.hh</span>
</span><span id="__span-34-17"><a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="w">        </span><span class="s">include/physicsList.hh</span>
</span><span id="__span-34-18"><a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="w">        </span><span class="s">include/action.hh</span><span class="p">)</span>
</span><span id="__span-34-19"><a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">mainFile</span><span class="w"> </span><span class="o">${</span><span class="nv">Geant4_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</span><span id="__span-34-20"><a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>
</span><span id="__span-34-21"><a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a><span class="nb">add_custom_target</span><span class="p">(</span><span class="s">mainFileCC</span><span class="w"> </span><span class="s">DEPENDS</span><span class="w"> </span><span class="s">mainFile</span><span class="p">)</span>
</span></code></pre></div>
</details>
<p>During the first build, one must run (from the top directory including <code>CMakeLists.txt</code>)</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>mkdir<span class="w"> </span>build
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nb">cd</span><span class="w"> </span>build
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>cmake<span class="w"> </span>..
</span></code></pre></div>
<p>This will setup the build directory. Now we can build and run the program inside the build directory</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>make
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>./mainFile
</span></code></pre></div>
<p>After editing the code, we have to rebuild the project using the <code>make</code> command.</p>
</div>
<div class="tabbed-block">
<p>Python environment with Geant4 must be correctly initialized first. After that, we write into the terminal</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>python<span class="w"> </span>mainFile.py
</span></code></pre></div>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../szd1/DAlembert.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: D&#39;Alembert Strategy">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                D'Alembert Strategy
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.annotate", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "toc.follow", "content.action.edit", "content.action.view", "search.suggest", "search.highlight", "navigation.footer"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>